<!doctype html>
<html lang="en">

<head>
	<title>Tables | Klorofil - Free Bootstrap Dashboard Template</title>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
	<!-- VENDOR CSS -->
	<link rel="stylesheet" href="assets/vendor/bootstrap/css/bootstrap.min.css">
	<link rel="stylesheet" href="assets/vendor/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="assets/vendor/dataTables/jquery.dataTables.min.css">
	<link rel="stylesheet" href="assets/vendor/linearicons/style.css">
	<!-- MAIN CSS -->
	<link rel="stylesheet" href="assets/css/main.css">
	<!-- FOR DEMO PURPOSES ONLY. You should remove this in your project -->
	<link rel="stylesheet" href="assets/css/demo.css">
	<!-- GOOGLE FONTS -->
	<!--<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700" rel="stylesheet">-->
	<!-- ICONS -->
	<link rel="apple-touch-icon" sizes="76x76" href="assets/img/apple-icon.png">
	<link rel="icon" type="image/png" sizes="96x96" href="assets/img/favicon.png">
</head>

<body>
	<!-- WRAPPER -->
	<div id="wrapper">
		<!-- NAVBAR -->
		<nav class="navbar navbar-default navbar-fixed-top">
			<h1 class="header_1">
				鑫洋泉运营系统
			</h1>
		</nav>
		<!-- END NAVBAR -->
		<!-- LEFT SIDEBAR -->
		<div id="sidebar-nav" class="sidebar">
			<div class="sidebar-scroll">
				<nav>
					<ul class="nav">
						<li><a href="index.html" class=""><i class="lnr lnr-home"></i> <span>首页</span></a></li>
						<li><a href="device.html" class="active"><i class="lnr lnr-chart-bars"></i> <span>车辆信息</span></a></li>
                        <li><a href="custom.html" class=""><i class="lnr lnr-chart-bars"></i> <span>客户信息</span></a></li>
                        <li><a href="cards.html" class=""><i class="lnr lnr-chart-bars"></i> <span>卡信息</span></a></li>

                        <!--<li><a href="device_detail.html" class=""><i class="lnr lnr-cog"></i> <span>设备详情</span></a></li>-->
                    </ul>
				</nav>
			</div>
		</div>
		<!-- END LEFT SIDEBAR -->
		<!-- MAIN -->
		<div class="main">
			<!-- MAIN CONTENT -->
			<div class="main-content">
				<div class="container-fluid">
                    <div class="row">
                        <div class="col-md-6">
					            <h3 class="page-title ">设备列表</h3>
                        </div>
                        <div class="col-md-2 dropdown">
                            <select class="form-control" id="search_type" onchange="selectOnchang(this)">
                                <option value="card" selected = "selected">卡号</option>
                                <option value="phone">手机号</option>
                            </select>
                        </div>
                        <!--<div class=" btn-group">
                            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Action <span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu">
                                <li><a href="#">Action</a></li>
                                <li><a href="#">Another action</a></li>
                                <li><a href="#">Something else here</a></li>
                                <li role="separator" class="divider"></li>
                                <li><a href="#">Separated link</a></li>
                            </ul>
                        </div>-->
                        <div class="col-md-4">
                            <!--<form class="navbar-form navbar-right">-->
                                <form>
                                <div class="input-group">
                                    <input type="text" id="device_id" value="" class="form-control" placeholder="设备号">
                                    <span class="input-group-btn"><button type="button" class="btn btn-primary" onclick="search()">查询</button></span>
                                </div>
                            </form>
                        </div>
                    </div>

                    <div class="row">
                        <table id="example" class="col-md-12 display" cellspacing="0" width="100%">
                            <!--<thead>
                                <tr>
                                    <th>设备号</th>
                                    <th>是否绑定车辆</th>
                                    <th>最近上数时间</th>
                                    <th>关联卡号</th>
                                    <th>状态</th>
                                </tr>
                            </thead>
                            <tfoot>
                                <tr>
                                    <th>Name</th>
                                    <th>Position</th>
                                    <th>Office</th>
                                    <th>Extn.</th>
                                    <th>Start date</th>
                                    <th>Salary</th>
                                </tr>
                            </tfoot>-->
                        </table>
					</div>
				</div>
			</div>
			<!-- END MAIN CONTENT -->
		</div>
		<!-- END MAIN -->
		<div class="clearfix"></div>
		<footer>
			<div class="container-fluid">
				<p class="copyright">&copy; 2017 <a href="#" target="_blank">Theme I Need</a>. All Rights Reserved. More Templates <a href="http://www.cssmoban.com/" target="_blank" title="模板之家">模板之家</a> - Collect from <a href="http://www.cssmoban.com/" title="网页模板" target="_blank">网页模板</a></p>
			</div>
		</footer>
	</div>
	<!-- END WRAPPER -->
	<!-- Javascript -->
	<script src="assets/vendor/jquery/jquery.min.js"></script>
	<script src="assets/vendor/bootstrap/js/bootstrap.min.js"></script>
	<script src="assets/vendor/jquery-slimscroll/jquery.slimscroll.min.js"></script>
    <script src="assets/vendor/dataTables/jquery.dataTables.min.js"></script>
	<script src="assets/scripts/klorofil-common.js"></script>
    <script>
    $('#example').dataTable( {
        // data:dataSet,
        oLanguage: {
            "sUrl": "assets/vendor/dataTables/zh_CN.json"
        },
        //左下角信息
        info: false,
        //关闭行数选择
        "lengthChange": false,
        //关闭本地搜索
        "searching": false,
        //关系列排
      
        // "ajax": 'assets/device_ajax.txt',
         "serverSide": true,//分页，取数据等等的都放到服务端去
            "deferRender": true,//当处理大数据时，延迟渲染数据，有效提高Datatables处理能力
            "destory": true,
            "ajax": {
                "dataType": 'json',
                "type": "POST",
                "url": "assets/device_ajax.txt",
                "data": function (d) {
                    // d.id = id;
                },
                "async": false
            },
            "columns": [
                {
                    // "data": "id",
                    "width": "100px",
                    "title": "设备号"
                }, {
                    // "data": "name",
                    "width": "150px",
                    "title": "是否绑定车辆"
                }, {
                    // "data": "sex",
                    "width": "100px",
                    "title": "最近上线时间",
                    render: function (data, type, row, meta) {
                        //个人理解  --以及参数的应用场景
                        //data:当前cell的值  --主要是操作这个参数来做渲染
                        //type:数据类型,枚举类型dt内置定义的  --用处不大
                        //row:当前行的所有数据  --可以做来用级联(没办法更改其他cell的渲染)
                        //meta:它下面有三个参数
                        //   //row,col 是当前cell的横纵坐标(相对于左上角)
                        //         --可以结合上个参数row做更加复杂的级联
                        //   //settings:dt的api实例,动态所有的参数信息都在里面
                           //  --这个很强大,获取参数信息就好,新手不要随便更改里面的参数信息
                        // var node = "<label ";
                        // if (data == "男") {
                        //     node += "style='color:red;'"
                        // } else if (data == "女") {
                        //     node += "style='color:green;'"
                        // } else {
                        //     node += "style='color:#000;'"
                        // }
                        // node += ">" + data ? "" : data + "</label>"
                        // return node;
                        return data
                    }
                }, {
                    // "data": "img",
                    "width": "200px",
                    "title": "关联卡号",
                    render: function (data, type, row, meta) {
                         //这里是主题  把url变成超链接、把图片路径显示为图片
                        return "<a href='"  + data + "'>" + data + "</a>";

                    }
                }, {
                    // "data": "mark",
                    "width": "300px",
                    "title": "状态",
                    render: function (data, type, row, meta) {
                        //render 里面想引入自定义参数信息,两种方式:
                        //一、让自定义参数的作用域大于render的作用域(全局变量、缓存等);
                        //二、修改源码(慎用)
                        //级联问题后面几期再讲,没有找到很好的素材
                        // var custom = window.sessionStorage.getItem("custom");//这里就可以获取到提前存在缓存的数据
                         return data;
                    }
                }
            ]
    } );

    function selectOnchang(me) {
        // alert(me.value)
    }
    function search() {
        var id = $('#device_id')[0];
        var search_type = $('#search_type')[0];
        if(id && search_type) {
            // alert(id.value + '  _  '+ search_type.value)
        }
    }
    </script>
</body>

</html>
